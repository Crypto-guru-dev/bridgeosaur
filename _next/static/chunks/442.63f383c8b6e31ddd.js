"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[442],{20353:function(n,r,e){e.d(r,{Z:function(){return x}});var t=e(26042),o=e(69396),i=e(99534),c=e(85893);e(67294);var a=e(7297),s=e(87379),u=e(57247),l=e(44147);function d(){var n=(0,a.Z)(["\n  0% {\n    background-position: 50% 0%;\n  }\n  50% {\n    background-position: 50% 100%;\n  }\n  100% {\n    background-position: 50% 0%;\n  }\n"]);return d=function(){return n},n}function h(){var n=(0,a.Z)(["\n      animation: "," 3s ease infinite;\n      background-size: 400% 400%;\n    "]);return h=function(){return n},n}function f(){var n=(0,a.Z)(["\n  background: ",";\n  border-radius: ",";\n  color: ",";\n  overflow: hidden;\n  position: relative;\n\n  ","\n\n  padding: 1px 1px 3px 1px;\n\n  ","\n"]);return f=function(){return n},n}function b(){var n=(0,a.Z)(["\n  width: 100%;\n  height: 100%;\n  overflow: ",";\n  background: ",";\n  border-radius: ",";\n"]);return b=function(){return n},n}var p=(0,s.F4)(d()),g=function(n){var r=n.isActive,e=n.isSuccess,t=n.isWarning,o=n.borderBackground,i=n.theme;return o||(t?i.colors.warning:e?i.colors.success:r?"linear-gradient(180deg, ".concat(i.colors.primaryBright,", ").concat(i.colors.secondary,")"):i.colors.cardBorder)},k=s.ZP.div.withConfig({componentId:"sc-eecfaa46-0"}).withConfig({componentId:"sc-62e22978-0"})(f(),g,function(n){return n.theme.radii.card},function(n){var r=n.theme,e=n.isDisabled;return r.colors[e?"textDisabled":"text"]},function(n){return n.isActive&&(0,s.iv)(h(),p)},u.Dh),v=(0,s.ZP)(l.Z).withConfig({componentId:"sc-eecfaa46-1"}).withConfig({componentId:"sc-62e22978-1"})(b(),function(n){return n.hasCustomBorder?"initial":"inherit"},function(n){var r=n.theme,e=n.background;return null!=e?e:r.card.background},function(n){return n.theme.radii.card});k.defaultProps={isActive:!1,isSuccess:!1,isWarning:!1,isDisabled:!1};var x=function(n){var r=n.ribbon,e=n.children,a=n.background,s=(0,i.Z)(n,["ribbon","children","background"]);return(0,c.jsx)(k,(0,o.Z)((0,t.Z)({},s),{children:(0,c.jsxs)(v,{background:a,hasCustomBorder:!!s.borderBackground,children:[r,e]})}))}},21442:function(n,r,e){e.r(r),e.d(r,{default:function(){return T}});var t,o,i,c,a=e(26042),s=e(828),u=e(7297),l=e(85893),d=e(97478),h=e(68486),f=e(87379),b=e(20353),p=e(75943),g=e(44147),k=e(88896),v=e(62077),x=e(95459),m=e(921),Z=e(47568),B=e(70655),N=e(67294),y=e(28687),j=e(62621),w=e(6680),I=e(36305),C=e(56927),S=e(8100),O=e(97477),D=[];function K(){var n=(0,u.Z)(['\n            query getNftMarketSubgraphHealth {\n              indexingStatusForCurrentVersion(subgraphName: "','") {\n                health\n                chains {\n                  chainHeadBlock {\n                    number\n                  }\n                  latestBlock {\n                    number\n                  }\n                }\n              }\n            }\n          ']);return K=function(){return n},n}(F=t||(t={}))[F.OK=0]="OK",F[F.WARNING=1]="WARNING",F[F.NOT_OK=2]="NOT_OK",F[F.UNKNOWN=3]="UNKNOWN";var P=function(n){var r,e,o,i,c,a=(0,N.useState)({status:t.UNKNOWN,currentBlock:0,chainHeadBlock:0,latestBlock:0,blockDifference:0}),u=a[0],l=a[1];return r=function(r){var e;(e=(0,Z.Z)(function(){var e,o,i,c,a,u,d,h,f;return(0,B.__generator)(this,function(b){switch(b.label){case 0:return b.trys.push([0,2,,3]),[4,Promise.all([(0,y.request)(w.AM,(0,y.gql)(K(),n)),r?Promise.resolve(r):j.v.getBlockNumber()])];case 1:return o=(e=s.Z.apply(void 0,[b.sent(),2]))[0].indexingStatusForCurrentVersion,i=e[1],c="healthy"===o.health,a=parseInt(o.chains[0].chainHeadBlock.number),d=i-(u=parseInt(o.chains[0].latestBlock.number)),h=i-a,!c||d>200||h>200?l({status:t.NOT_OK,currentBlock:i,chainHeadBlock:a,latestBlock:u,blockDifference:d}):d>50||h>50?l({status:t.WARNING,currentBlock:i,chainHeadBlock:a,latestBlock:u,blockDifference:d}):l({status:t.OK,currentBlock:i,chainHeadBlock:a,latestBlock:u,blockDifference:d}),[3,3];case 2:return f=b.sent(),console.error("Failed to perform health check for ".concat(n," subgraph"),f),[3,3];case 3:return[2]}})}),function(){return e.apply(this,arguments)})()},o=(0,O.Z)().chainId,c=void 0===(i=(0,S.ZP)(o&&[C.KI,"blockNumber",o]).data)?0:i,(0,N.useEffect)(r.bind(null,c),[c].concat((0,I.Z)([n]))),u};function _(){var n=(0,u.Z)(["\n  border-radius: 8px;\n  > div {\n    border-radius: 8px;\n  }\n  user-select: none;\n"]);return _=function(){return n},n}function W(){var n=(0,u.Z)(["\n  gap: 7px;\n"]);return W=function(){return n},n}function A(){var n=(0,u.Z)(["\n  width: 12px;\n  height: 12px;\n  border-radius: 50%;\n  background: ",";\n"]);return A=function(){return n},n}var F,G=(0,f.ZP)(b.Z).withConfig({componentId:"sc-796f7a16-0"})(_()),H=(0,f.ZP)(p.Z).withConfig({componentId:"sc-796f7a16-1"})(W()),R=(0,f.ZP)(g.Z).withConfig({componentId:"sc-796f7a16-2"})(A(),function(n){var r=n.$color;return n.theme.colors[r]}),$=function(n){var r=n.color,e=n.label,t=n.description,o=n.currentBlock,i=n.secondRemainingBlockSync,c=n.blockNumberFromSubgraph,a=(0,h.$G)().t;return(0,l.jsxs)(g.Z,{children:[(0,l.jsxs)(H,{pb:"10px",children:[(0,l.jsx)(R,{$color:r}),(0,l.jsx)(v.Z,{children:e})]}),(0,l.jsx)(v.Z,{pb:"24px",children:t}),(0,l.jsxs)(v.Z,{children:[(0,l.jsxs)("strong",{children:[a("Chain Head Block"),":"]})," ",o]}),(0,l.jsxs)(v.Z,{children:[(0,l.jsxs)("strong",{children:[a("Latest Subgraph Block"),":"]})," ",c]}),(0,l.jsxs)(v.Z,{children:[(0,l.jsxs)("strong",{children:[a("Delay"),":"]})," ",o-c," (",i,"s)"]})]})},T=function(n){var r,e,u,f=n.subgraphName,b=n.inline,p=n.customDescriptions,Z=n.obeyGlobalSetting,B=(0,h.$G)().t,N=P(f),y=N.status,j=N.currentBlock,w=N.blockDifference,I=N.latestBlock,C=(0,s.Z)((0,m.YF)(),1)[0],S=y===t.WARNING||y===t.NOT_OK,O={delayed:{label:B("Delayed"),color:"failure",description:null!==(o=null==p?void 0:p.delayed)&&void 0!==o?o:B("Subgraph is currently experiencing delays due to BSC issues. Performance may suffer until subgraph is restored.")},slow:{label:B("Slight delay"),color:"warning",description:null!==(i=null==p?void 0:p.slow)&&void 0!==i?i:B("Subgraph is currently experiencing delays due to BSC issues. Performance may suffer until subgraph is restored.")},healthy:{label:B("Fast"),color:"success",description:null!==(c=null==p?void 0:p.healthy)&&void 0!==c?c:B("No issues with the subgraph.")}},D=w*d.hJ,K=O[y===t.NOT_OK?"delayed":y===t.WARNING?"slow":"healthy"],_=(0,k.Z)((0,l.jsx)($,(0,a.Z)({currentBlock:j,secondRemainingBlockSync:D,blockNumberFromSubgraph:I},K)),{placement:"top"}),W=_.targetRef,A=_.tooltipVisible,F=_.tooltip;return I&&j&&((void 0===Z||Z)&&C||S)?b?(0,l.jsxs)(H,{alignItems:"center",justifyContent:"flex-end",ref:W,children:[(0,l.jsx)(R,{$color:K.color}),(0,l.jsx)(v.Z,{children:K.label}),(0,l.jsx)(x.Z,{}),A&&F]}):(0,l.jsxs)(g.Z,{position:"fixed",bottom:"calc(55px + env(safe-area-inset-bottom))",right:"5%",ref:W,"data-test":"subgraph-health-indicator",children:[A&&F,(0,l.jsx)(G,{children:(0,l.jsxs)(H,{alignItems:"center",p:"10px",children:[(0,l.jsx)(R,{$color:K.color}),(0,l.jsx)(v.Z,{children:K.label}),(0,l.jsx)(x.Z,{})]})})]}):null}},97478:function(n,r,e){e.d(r,{LB:function(){return i},hJ:function(){return o}});var t=e(27750),o=3,i="https://app.bridgeosaur.finance/swap/register/";"".concat("https://bridgeosaur.finance","/add"),(0,t.t)(18)}}]);